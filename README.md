# Домашнее задание к занятию "`Мониторинг`" - `Татаринцев Алексей`



---

### Задание 1


1. `Вас пригласили настроить мониторинг на проект. На онбординге вам рассказали, что проект представляет из себя платформу для вычислений с выдачей текстовых отчетов, которые сохраняются на диск. Взаимодействие с платформой осуществляется по протоколу http. Также вам отметили, что вычисления загружают ЦПУ. Какой минимальный набор метрик вы выведите в мониторинг и почему?`
```
Ключевые данные были озвучены:
а. CPU load- Платформа сильно грузит процессор, это основная точка риска.
б. RAM usage / Swap usage - При нехватке памяти система начнет использовать swap, что значительно замедлит работу.
в. Disk space - Отчеты сохраняются на диск. Заполнение диска остановит работу.
г. Disk I/O latency - Постоянная запись отчетов может создать проблемы с производительностью
д. HTTP код ответов (2xx, 4xx, 5xx) - Платформа доступна по HTTP. Эти метрики покажут общее состояние приложения.
е. Latency (время ответа) - Показывает, насколько быстро платформа отвечает на запросы.
ё. Количество HTTP-запросов - Полезно для анализа нагрузки и понимания работы сервиса в пиковые моменты.
```
2. `ЗМенеджер продукта посмотрев на ваши метрики сказал, что ему непонятно что такое RAM/inodes/CPUla. Также он сказал, что хочет понимать, насколько мы выполняем свои обязанности перед клиентами и какое качество обслуживания. Что вы можете ему предложить?`
```
SLA-дэшборд с метриками:
- Доступность сервиса (uptime) — % времени, когда сервис доступен
- Ошибка по запросам (Error Rate) — доля неуспешных HTTP-запросов
- Время ответа (Latency) — среднее значение
- Количество инцидентов за период
Понятные индикаторы:
- «Зеленый/Желтый/Красный» индикатор по SLA

```
3. `Вашей DevOps команде в этом году не выделили финансирование на построение системы сбора логов. Разработчики в свою очередь хотят видеть все ошибки, которые выдают их приложения. Какое решение вы можете предпринять в этой ситуации, чтобы разработчики получали ошибки приложения?`
```
Как вариант настроить TICK-стек (Telegraf + InfluxDB + Chronograf + Kapacitor):

- TICK-стек рассматривался на курсе как легковесная альтернатива большим лог-системам.
- Telegraf может забирать логи из файлов и системных демонов (syslog, journald) без дополнительных затрат.
- Chronograf предоставляет визуальный интерфейс (если нужно).

```

4. `Вы, как опытный SRE, сделали мониторинг, куда вывели отображения выполнения SLA=99% по http кодам ответов. Вычисляете этот параметр по следующей формуле: summ_2xx_requests/summ_all_requests. Данный параметр не поднимается выше 70%, но при этом в вашей системе нет кодов ответа 5xx и 4xx. Где у вас ошибка?`
```
В том и проблема , что совсем не опытный :) 
SLA = summ_2xx_requests / summ_all_requests < 70%, но нет 4xx/5xx
Буду признателен за пояснение данной формулы, так как понимаю, что она видимо не правельная, так как корректный ответ может быть не только 200ый, но и 300ый ( но и 100ые можно учесть)
(summ_2xx_requests + summ_3xx_requests)/summ_all_requests
```

5. `Опишите основные плюсы и минусы pull и push систем мониторинга.`
```
Push

   Плюсы:

- Удобно использовать когда собирается большое количество метрик и неустойчивый канал связи между агентами и системой мониторинга.
- Можно переключать передачу данных между udp и tcp, тем самым выбирая между экономией трафика или гарантией доставки.
- Гибкая настройка частоты и объёма передаваемых метрик.
Pull

   Плюсы:

- Позволяет контролировать источники откуда принимать метрики.
- Можно защитить канал связи между агентами и системой мониторинга шифрованием.
- Упрощённая отладка получения метрик с агентов.
   Минусы:
- К минусам можно отнести сложность мониторинга динамически изменяющегося окружения
```
6. 
```
Какие из ниже перечисленных систем относятся к push модели, а какие к pull? А может есть гибридные?
- Prometheus
- TICK
- Zabbix
- VictoriaMetrics
- Nagios

Ответ:
Prometheus - Можно отправлять метрики по push модели при помощи push gateway, но Prometheus будет из забирать как pull
TICK - push
Zabbix - push и pull
VictoriaMetrics - push
Nagios - pull
```
7. `Запускаю docker-compose`
```
docker compose up -d chronograf
sanbox-chronograf-1
WARN[0000] /home/alexey/dz/monitoring/sanbox/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion 
[+] Running 4/4
 ✔ Container sanbox-influxdb-1    Running                                                                                                                 0.0s 
 ✔ Container sanbox-chronograf-1  Started                                                                                                                 0.8s 
 ✔ Container sanbox-kapacitor-1   Started                                                                                                                 0.3s 
 ✔ Container sanbox-telegraf-1    Started              
```
![1](https://github.com/Foxbeerxxx/monitoring/blob/main/img/img1.png)

8. `Дальше по заданию работа с Chronograf`

![2](https://github.com/Foxbeerxxx/monitoring/blob/main/img/img2.png)
![3](https://github.com/Foxbeerxxx/monitoring/blob/main/img/img3.png)

9. `Заполните здесь этапы выполнения, если требуется ....`
10. `Заполните здесь этапы выполнения, если требуется ....`
11. `Заполните здесь этапы выполнения, если требуется ....`
12. 

```
Поле для вставки кода...
....
....
....
....
```

`При необходимости прикрепитe сюда скриншоты
`


---

### Задание 3

`Приведите ответ в свободной форме........`

1. `Заполните здесь этапы выполнения, если требуется ....`
2. `Заполните здесь этапы выполнения, если требуется ....`
3. `Заполните здесь этапы выполнения, если требуется ....`
4. `Заполните здесь этапы выполнения, если требуется ....`
5. `Заполните здесь этапы выполнения, если требуется ....`
6. 

```
Поле для вставки кода...
....
....
....
....
```

`При необходимости прикрепитe сюда скриншоты
![Название скриншота](ссылка на скриншот)`

### Задание 4

`Приведите ответ в свободной форме........`

1. `Заполните здесь этапы выполнения, если требуется ....`
2. `Заполните здесь этапы выполнения, если требуется ....`
3. `Заполните здесь этапы выполнения, если требуется ....`
4. `Заполните здесь этапы выполнения, если требуется ....`
5. `Заполните здесь этапы выполнения, если требуется ....`
6. 

```
Поле для вставки кода...
....
....
....
....
```

`При необходимости прикрепитe сюда скриншоты
![Название скриншота](ссылка на скриншот)`
